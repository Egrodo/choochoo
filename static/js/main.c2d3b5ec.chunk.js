(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,n){e.exports={TrainBlock:"TrainBlock_TrainBlock__3i6q8",headlineContainer:"TrainBlock_headlineContainer__oab_h",direction:"TrainBlock_direction__3Dtt4",N:"TrainBlock_N__1evkk",S:"TrainBlock_S__1TwUx",darken:"TrainBlock_darken__3rLPj",statusContainer:"TrainBlock_statusContainer__25Ahv",loadingBlock:"TrainBlock_loadingBlock__Z5Iai",floatLoader:"TrainBlock_floatLoader__2yLHl",errorBlock:"TrainBlock_errorBlock__3BhRb",ErrorImg:"TrainBlock_ErrorImg__1Bj5z"}},function(e,t,n){e.exports={Input:"Input_Input__8-SE7",inputContainer:"Input_inputContainer__1TiPA",input:"Input_input__uhj3I",fluid:"Input_fluid__1N9y5",label:"Input_label__1tRNF",error:"Input_error__2umM9",icon:"Input_icon__3kQM6",cancel:"Input_cancel__1vKWH",spinner:"Input_spinner__276aE"}},function(e,t,n){e.exports={TrainStatus:"TrainStatus_TrainStatus__2wwYR",timeContainer:"TrainStatus_timeContainer__2KcoO",arrivalTime:"TrainStatus_arrivalTime__34oCB",routeImg:"TrainStatus_routeImg__2-B9Z"}},function(e,t,n){e.exports={inputContainer:"Typeahead_inputContainer__10MDk",bottomBorder:"Typeahead_bottomBorder__2dIcY",dropDownContainer:"Typeahead_dropDownContainer__1aecB",hidden:"Typeahead_hidden__13dV5",listContainer:"Typeahead_listContainer__3R5mL",dropDownItem:"Typeahead_dropDownItem__3tIv5"}},function(e,t,n){e.exports={selectContainer:"Option_selectContainer__12sGN",select:"Option_select__3_ZpF",label:"Option_label__1k3Ha",error:"Option_error__9zY7D",disabled:"Option_disabled__2TUeo"}},function(e,t,n){e.exports={WeatherBlock:"WeatherBlock_WeatherBlock__3Ac1r",temperatureContainer:"WeatherBlock_temperatureContainer__1TLgj",temperature:"WeatherBlock_temperature__1Irai",desc:"WeatherBlock_desc__30aa_"}},function(e,t,n){e.exports={WelcomeView:"WelcomeView_WelcomeView__26BU-",mainHeader:"WelcomeView_mainHeader__1akez",secondaryHeader:"WelcomeView_secondaryHeader__3wmNJ",inputsContainer:"WelcomeView_inputsContainer__j4eY3",btnContainer:"WelcomeView_btnContainer__2MkH7"}},function(e,t,n){e.exports={MainView:"MainView_MainView__nzFrf",mainHeader:"MainView_mainHeader__2WW32",weatherContainer:"MainView_weatherContainer__1-oIF",trainContainer:"MainView_trainContainer__1LZpw",settingsLink:"MainView_settingsLink__3QQn8"}},function(e,t,n){e.exports={SettingsView:"SettingsView_SettingsView__Dkkp-",mainHeader:"SettingsView_mainHeader__3yDai",inputsContainer:"SettingsView_inputsContainer__3ZEji",btnContainer:"SettingsView_btnContainer__3pOZS",saveContainer:"SettingsView_saveContainer__1atYY"}},function(e,t,n){e.exports={App:"App_App__3-2JL",imgContainer:"App_imgContainer__3t918",headerImg:"App_headerImg__3eAUe"}},function(e,t,n){e.exports={Button:"Button_Button__1la9i",iconContainer:"Button_iconContainer__2dk5q",icon:"Button_icon__2Pbxj",text:"Button_text__3Gbvj"}},function(e,t,n){e.exports={NetworkDialogue:"NetworkDialogue_NetworkDialogue__kfD56",active:"NetworkDialogue_active__2Qxn3",blink:"NetworkDialogue_blink__1hBGP"}},function(e,t,n){e.exports={TrainTracks:"TrainTracks_TrainTracks__2D1xp",TrainImg:"TrainTracks_TrainImg__3bhim"}},,,function(e,t,n){e.exports=n.p+"static/media/sunny-day.275bbde9.png"},function(e,t,n){e.exports={Spinner:"Spinner_Spinner__pUK9B"}},function(e,t,n){e.exports=n.p+"static/media/whiteTrain.390291fc.png"},function(e,t,n){e.exports=n.p+"static/media/emailIcon.ac575565.svg"},function(e,t,n){e.exports=n.p+"static/media/cloudIcon.941f4bce.svg"},,function(e,t,n){e.exports=n(45)},,,,,,,,,,,,,,,,,,function(e,t,n){var a={"./1.svg":[46,1],"./2.svg":[47,2],"./3.svg":[48,3],"./4.svg":[49,4],"./5.svg":[50,5],"./5x.svg":[51,6],"./6.svg":[52,7],"./6x.svg":[53,8],"./7.svg":[54,9],"./7x.svg":[55,10],"./a.svg":[56,11],"./b.svg":[57,12],"./c.svg":[58,13],"./d.svg":[59,14],"./e.svg":[60,15],"./f.svg":[61,16],"./g.svg":[62,17],"./gs.svg":[63,18],"./h.svg":[64,19],"./j.svg":[65,20],"./l.svg":[66,21],"./m.svg":[67,22],"./n.svg":[68,23],"./q.svg":[69,24],"./r.svg":[70,25],"./s.svg":[71,26],"./si.svg":[72,27],"./t.svg":[73,28],"./w.svg":[74,29],"./z.svg":[75,30]};function r(e){var t=a[e];return t?n.e(t[1]).then(function(){var e=t[0];return n.t(e,7)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(a)},r.id=41,e.exports=r},,,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),c=n.n(o),i=(n(28),n(1)),l=n(17),s=n.n(l),u=n(11),m=n.n(u),d=n(13),f=n.n(d);function p(e){var t=e.message;return r.a.createElement("section",{className:"".concat(f.a.NetworkDialogue," ").concat(t&&f.a.active)},t,r.a.createElement("span",null,"."),r.a.createElement("span",null,"."),r.a.createElement("span",null,"."))}p.defaultProps={message:""};var g=p,h=n(5),_=n.n(h);var v=n(3),b=n.n(v);function E(e){var t=e.initValue,n=e.placeholder,o=e.onChange,c=e.onBlur,l=e.onFocus,s=e.alt,u=e.label,m=e.classes,d=e.fluid,f=e.error,p=e.loading,g=e.maxLength,h=Object(a.useState)(t),_=Object(i.a)(h,2),v=_[0],E=_[1],w=Object(a.useRef)(),O=Object(a.useState)(!1),j=Object(i.a)(O,2),k=j[0],C=j[1];return Object(a.useEffect)(function(){E(t)},[t]),r.a.createElement("section",{className:b.a.Input},u&&r.a.createElement("label",{htmlFor:s,className:b.a.label},u),r.a.createElement("div",{className:b.a.inputContainer},r.a.createElement("input",{value:v,onChange:function(e){E(e.target.value),o(e)},onFocus:function(){setTimeout(function(){C(!0)},200),l()},onBlur:function(){setTimeout(function(){C(!1)},200),c()},className:"\n          ".concat(b.a.input,"\n          ").concat(m||"","\n          ").concat(d&&b.a.fluid,"\n          ").concat(f&&b.a.error,"\n          "),autoComplete:"off",autoCorrect:"off",spellCheck:"false",placeholder:n,maxLength:g,ref:w,name:s,alt:s,id:s}),p?r.a.createElement("i",{role:"button",tabIndex:"0",alt:"Spinner",className:"".concat(b.a.icon," ").concat(b.a.spinner)}):k&&r.a.createElement("i",{role:"button",tabIndex:"0",alt:"Delete",className:"".concat(b.a.icon," ").concat(b.a.cancel),onClick:function(){E(""),w.current.focus()}})),f&&r.a.createElement("label",{htmlFor:s,className:"".concat(b.a.label," ").concat(b.a.error)},f))}E.defaultProps={initValue:"",placeholder:"",onChange:function(){},onBlur:function(){},onFocus:function(){},alt:"",label:"",classes:"",fluid:1,error:"",loading:!1,maxLength:"50"};var w=E;function O(e){var t=e.error,n=e.getData,o=e.stationObj,c=e.setStationObj,l=e.loading,s=Object(a.useState)(o.stop_name||""),u=Object(i.a)(s,2),m=u[0],d=u[1],f=Object(a.useState)([]),p=Object(i.a)(f,2),g=p[0],h=p[1],v=Object(a.useState)(!1),b=Object(i.a)(v,2),E=b[0],O=b[1],j=function(e,t){var n=Object(a.useState)(e),r=Object(i.a)(n,2),o=r[0],c=r[1];return Object(a.useEffect)(function(){var n=setTimeout(function(){c(e)},t);return function(){return clearTimeout(n)}},[e,t]),o}(m,500),k=function(e){var t=e.target.id;if(!g[t])throw new RangeError("Invalid id passed to onOptionClick");O(!1),c(g[t]),d(g[t].stop_name)};return Object(a.useEffect)(function(){j&&E&&n(m,h,O)},[j]),r.a.createElement("form",null,r.a.createElement("div",{className:_.a.inputContainer},r.a.createElement(w,{placeholder:"Station...",initValue:m,onChange:function(e){d(e.target.value),O(!0),!e.target.value&&g.length&&h([])},onFocus:function(){g.length>1&&O(!0)},onBlur:function(){setTimeout(function(){if(E&&O(!1),!o.stop_name||m!==o.stop_name)for(var e=m.toLowerCase().trim(),t=0;t<g.length;++t)if(e===g[t].stop_name.toLowerCase()){c(g[t]),d(g[t].stop_name);break}},200)},alt:"station",label:"Station Name",classes:_.a.input,fluid:1,error:t,loading:l})),r.a.createElement("div",{className:"".concat(_.a.dropDownContainer," ").concat(!E&&_.a.hidden)},r.a.createElement("ul",{className:_.a.listContainer},g.map(function(e,t){return r.a.createElement("li",{key:e.stop_name,id:t,className:_.a.dropDownItem,onClick:k},e.stop_name)}))))}O.defaultProps={error:"",getData:function(){throw new Error("getData not passed to Typeahead")},stationObj:{},setStationObj:function(){throw new Error("setStation not passed to Typeahead")},loading:!1};var j=O,k=n(8),C=n.n(k),N=n(6),S=n.n(N);function y(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),o=n[0],c=n[1];return Object(a.useEffect)(function(){var t={};e.data.forEach(function(n){var a="";e.lineMap[n.charAt(0)].forEach(function(t,r){a+="".concat(t),e.lineMap[n.charAt(0)].length-1!==r&&(a+=", ")}),t[n]=a}),c(t)},[e.data]),r.a.createElement("div",{className:S.a.selectContainer},e.label&&r.a.createElement("label",{htmlFor:e.alt,className:S.a.label},e.label),r.a.createElement("select",{className:"".concat(S.a.select," ").concat(e.data.length<2&&S.a.disabled),onChange:e.onChange,disabled:e.data.length<2,value:e.selected},e.data.map(function(e,t){return r.a.createElement("option",{value:t,key:e},"".concat(o[e]," Trains"))})),e.error&&r.a.createElement("label",{htmlFor:e.alt,className:"".concat(S.a.label," ").concat(S.a.error)},e.error))}y.defaultProps={data:[],selected:0,onChange:function(){throw new Error("onChange not passed to Typeahead")},lineMap:{},error:"",label:"",alt:""};var T=y,B=n(22),I=n(12),x=n.n(I);var L=function(e){var t=e.icon,n=Object(B.a)(e,["icon"]);return r.a.createElement("button",Object.assign({className:"".concat(x.a.Button," ").concat(t&&x.a.iconContainer),type:"button"},n),t&&r.a.createElement("img",{src:t,className:x.a.icon,alt:"Icon"}),r.a.createElement("span",{className:x.a.text},n.children))},D={1:["1","2","3"],2:["2","3"],3:["2","3"],4:["4","5","6"],5:["4","5","6"],6:["4","5","6"],7:["7"],9:["GS Shuttle"],S:["S","SIR"],A:["A","C","E","H"],C:["A","C","E","H"],E:["A","C","E","H"],H:["A","C","E","H"],Q:["N","R","W","Q"],N:["N","R","W","Q"],R:["N","R","W","Q"],W:["N","R","W","Q"],F:["B","D","F","M"],M:["B","D","F","M"],D:["B","D","F","M"],B:["B","D","F","M"],G:["G"],J:["J","Z"],Z:["J","Z"],L:["L"]};function M(e){var t=e.saveChanges,n=e.networkError,o=Object(a.useState)(""),c=Object(i.a)(o,2),l=c[0],s=c[1],u=Object(a.useState)({}),m=Object(i.a)(u,2),d=m[0],f=m[1],p=Object(a.useState)([]),g=Object(i.a)(p,2),h=g[0],_=g[1],v=Object(a.useState)(""),b=Object(i.a)(v,2),E=b[0],O=b[1],k=Object(a.useState)({name:"",stationObj:"",line:""}),N=Object(i.a)(k,2),S=N[0],y=N[1],B=function(e,t,n){t(e),n(!0)};return Object(a.useEffect)(function(){_(d.stop_id),d.stop_id&&O(d.stop_id[0])},[d]),r.a.createElement("section",{className:C.a.WelcomeView},r.a.createElement("h1",{className:C.a.mainHeader},"Welcome to Choochoo"),r.a.createElement("h4",{className:C.a.secondaryHeader},"Your friendly schedule helper! I work with all the trains in the MTA system, please pick one to get started!"),r.a.createElement("div",{className:C.a.inputsContainer},r.a.createElement(j,{error:S.stationObj?S.stationObj:"",getData:function(e,t,a){var r="".concat("https://choochooserver.herokuapp.com","/search/stops/?query=").concat(e);fetch(r).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error(e.error);t(e),a(!0)}).catch(function(e){"Rate Limit Reached"===e.message?n("Rate Limit Reached",!1):n("/searchStops req failed",!0,B,r,t,a)})},stationObj:d,setStationObj:f}),r.a.createElement(w,{onChange:function(e){return s(e.target.value)},initValue:l,maxLength:"16",placeholder:"Name...",alt:"name",label:"First Name (optional)",error:S.name?S.name:"",fluid:1}),r.a.createElement(T,{data:h,selection:E,onChange:function(e){return O(h[e.target.value])},error:S.line?S.line:"",lineMap:D,label:"Subway Line",alt:"Subway Line"})),r.a.createElement("div",{className:C.a.btnContainer},r.a.createElement(L,{onClick:function(){var e={};Object.keys(d).length||(e.stationObj="Missing station name"),l.length>16&&(e.name="First name too long"),E||(e.line="Missing line"),y(e),Object.keys(e).length||t(l,d,E)}},"Get Started")))}M.defaultProps={saveChanges:function(){throw new ReferenceError("saveChanges not passed to MainView")},networkError:function(){throw new ReferenceError("networkError not passed to MainView")}};var R=M,V=n(18),W=n.n(V);var A=function(){return r.a.createElement("div",{className:W.a.Spinner},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},F=n(7),H=n.n(F);function P(e){var t=e.lat,n=e.lon,o=e.networkError,c=Object(a.useState)("00"),l=Object(i.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)("Loading"),d=Object(i.a)(m,2),f=d[0],p=d[1],g=Object(a.useState)(!0),h=Object(i.a)(g,2),_=h[0],v=h[1],b=function(e){u(Math.round(e.temperature)),p(e.summary)};return Object(a.useEffect)(function(){!function(){v(!0);var e="".concat("https://choochooserver.herokuapp.com","/api/weather/").concat(t,"/").concat(n);fetch(e).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error(e.error);u(Math.round(e.temperature)),p(e.summary)}).catch(function(t){console.count("Throwing error from weatherBlock"),"Rate Limit Reached"===t.message?o("Rate Limit Reached",!1):o("/api/weather req failed",!0,b,e)})}()},[]),Object(a.useEffect)(function(){"00"!==s&&"Loading"!==f&&v(!1)},[s,f]),r.a.createElement("section",{className:H.a.WeatherBlock},_?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:H.a.loader},r.a.createElement(A,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:H.a.temperatureContainer},r.a.createElement("span",{className:H.a.temperature},s)),r.a.createElement("div",{className:H.a.descContainer},r.a.createElement("span",{className:H.a.desc},f))))}P.defaultProps={lat:"40.7831",lon:"73.9712",networkError:function(){throw new ReferenceError("networkError not passed to WeatherBlock")}};var q=P,U=n(19),G=n.n(U),J=n(14),Q=n.n(J);function Z(e){var t=e.eta,n=Object(a.useState)(0),o=Object(i.a)(n,2),c=o[0],l=o[1],s=Object(a.useState)(0),u=Object(i.a)(s,2),m=u[0],d=u[1];return Object(a.useEffect)(function(){if(t>600)l(0);else{var e=(1-t/600)*m;e<m?l(e):e!==m&&l(m)}},[m,t]),r.a.createElement("section",{className:Q.a.TrainTracks},r.a.createElement("img",{src:G.a,onLoad:function(e){var t=e.target,n=t.parentNode.offsetWidth-t.offsetWidth;d(n)},alt:"Train",className:Q.a.TrainImg,style:{left:c}}))}Z.defaultProps={eta:6e5};var Y=Z,z=n(4),K=n.n(z);function X(e){var t=e.status,o=Object(a.useState)(""),c=Object(i.a)(o,2),l=c[0],s=c[1],u=Object(a.useState)(t.eta),m=Object(i.a)(u,2),d=m[0],f=m[1],p=function(e){n(41)("./".concat(e,".svg")).then(function(e){s(e.default)}).catch(function(e){console.error(e)})};return Object(a.useEffect)(function(){p(t.routeId.toLowerCase());var e=window.setInterval(function(){f(function(e){return e-10>0?e-10:0})},1e4);return function(){window.clearInterval(e)}},[]),Object(a.useEffect)(function(){p(t.routeId.toLowerCase()),f(t.eta)},[t]),r.a.createElement("section",{className:K.a.TrainStatus},r.a.createElement("div",{className:K.a.timeContainer},r.a.createElement("span",{className:K.a.arrivalTime},Math.round(d/60)<1?"<1":Math.round(d/60)),r.a.createElement("span",{className:K.a.min},"min")),r.a.createElement("div",{className:K.a.routeId},r.a.createElement("img",{className:K.a.routeImg,alt:t.routeId,src:l})),r.a.createElement("div",{className:K.a.trainTracksContainer},r.a.createElement(Y,{eta:d})))}X.defaultProps={status:{}};var $=X;function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var te=r.a.createElement("g",null),ne=r.a.createElement("g",null),ae=r.a.createElement("g",null),re=r.a.createElement("g",null),oe=r.a.createElement("g",null),ce=r.a.createElement("g",null),ie=r.a.createElement("g",null),le=r.a.createElement("g",null),se=r.a.createElement("g",null),ue=r.a.createElement("g",null),me=r.a.createElement("g",null),de=r.a.createElement("g",null),fe=r.a.createElement("g",null),pe=r.a.createElement("g",null),ge=r.a.createElement("g",null),he=function(e){return r.a.createElement("svg",ee({version:1.1,id:"Capa_1",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 212.982 212.982",style:{enableBackground:"new 0 0 212.982 212.982"},xmlSpace:"preserve"},e),r.a.createElement("g",{id:"Close"},r.a.createElement("path",{style:{fillRule:"evenodd",clipRule:"evenodd"},d:"M131.804,106.491l75.936-75.936c6.99-6.99,6.99-18.323,0-25.312 c-6.99-6.99-18.322-6.99-25.312,0l-75.937,75.937L30.554,5.242c-6.99-6.99-18.322-6.99-25.312,0c-6.989,6.99-6.989,18.323,0,25.312 l75.937,75.936L5.242,182.427c-6.989,6.99-6.989,18.323,0,25.312c6.99,6.99,18.322,6.99,25.312,0l75.937-75.937l75.937,75.937 c6.989,6.99,18.322,6.99,25.312,0c6.99-6.99,6.99-18.322,0-25.312L131.804,106.491z"})),te,ne,ae,re,oe,ce,ie,le,se,ue,me,de,fe,pe,ge)},_e=(n.p,n(2)),ve=n.n(_e);function be(e){var t=e.stationObj,n=e.line,o=e.reqOn,c=e.networkError,l=Object(a.useState)(localStorage.getItem("direction")||"N"),s=Object(i.a)(l,2),u=s[0],m=s[1],d=Object(a.useState)({N:[],S:[]}),f=Object(i.a)(d,2),p=f[0],g=f[1],h=Object(a.useState)(!0),_=Object(i.a)(h,2),v=_[0],b=_[1],E=Object(a.useState)(!1),w=Object(i.a)(E,2),O=w[0],j=w[1],k=Object(a.useRef)(),C=function(e){!e.error&&e.N.length&&e.S.length||(console.error(e.error),j(!0)),g(e)},N=function(){console.log("Getting new schedule for line ".concat(n,"."));var e="".concat("https://choochooserver.herokuapp.com","/api/schedule/").concat(n);fetch(e).then(function(e){if(!e.ok)throw e;return e.json()}).then(function(e){if(e.error)throw new Error(e.error);e.N.length&&e.S.length?j(!1):j(!0),b(!1),g(e)}).catch(function(t){j(!0),500===t.status||503===t.status?c("500 on /api/schedule/".concat(n),!0,C,e):console.error(t)})},S=function(){return window.setInterval(function(){b(function(e){return e||N(),e})},6e4)};Object(a.useEffect)(function(){return b(!0),N(),k.current=S(),function(){window.clearInterval(k.current)}},[]),Object(a.useEffect)(function(){o&&!k.current?(k.current=S(),b(!0),N()):o||(window.clearInterval(k.current),k.current=void 0)},[o]);return r.a.createElement("section",{className:ve.a.TrainBlock},r.a.createElement("div",{className:ve.a.headlineContainer},r.a.createElement("span",{className:ve.a.stationName},t.stop_name),r.a.createElement("span",{onClick:function(){m(function(e){var t="N"===e?"S":"N";return localStorage.setItem("direction",t),t})},role:"button",tabIndex:"0",className:"".concat(ve.a.direction," ").concat(ve.a[u])},"".concat("N"===u?"Up":"Down","town"))),r.a.createElement("div",{className:ve.a.statusContainer},r.a.createElement(function(){if(O&&!p[u].length)return r.a.createElement("div",{className:ve.a.errorBlock},r.a.createElement(he,{className:ve.a.ErrorImg}),r.a.createElement("h4",null,"No schedule found for ","".concat("N"===u?"Up":"Down","town"),r.a.createElement("span",{role:"img","aria-label":"frowning face"},"\ud83d\ude41")),r.a.createElement("p",null,"Check the MTA website for service alerts:"),r.a.createElement("a",{href:"http://alert.mta.info/",target:"_blank",rel:"noopener noreferrer"},"https://new.mta.info/"));if(!v&&p[u].length){var e=p[u];return r.a.createElement(r.a.Fragment,null,e[0]&&r.a.createElement($,{status:e[0],key:"".concat(e[0].eta,"_",0)}),e[1]&&r.a.createElement($,{status:e[1],key:"".concat(e[1].eta,"_",1)}),e[2]&&r.a.createElement($,{status:e[2],key:"".concat(e[2].eta,"_",2)}),window.screen.height>775&&e[3]&&r.a.createElement($,{status:e[3],key:"".concat(e[3].eta,"_",3)}))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ve.a.floatLoader},r.a.createElement(A,null)),r.a.createElement("div",{className:ve.a.darken},r.a.createElement("div",{className:ve.a.loadingBlock}),r.a.createElement("div",{className:ve.a.loadingBlock}),r.a.createElement("div",{className:ve.a.loadingBlock}),window.screen.height>775&&r.a.createElement("div",{className:ve.a.loadingBlock})))},null)))}be.defaultProps={stationObj:{},line:"",reqOn:!0,networkError:function(){throw new ReferenceError("networkError not passed to MainView")}};var Ee=be,we=n(9),Oe=n.n(we);function je(e){var t=e.name,n=e.stationObj,o=e.line,c=e.reqOn,l=e.gotoSettings,s=e.networkError,u=Object(a.useState)(),m=Object(i.a)(u,2),d=m[0],f=m[1];return Object(a.useEffect)(function(){f(function(){var e=(new Date).getHours();return e>5&&e<12?"Morning":e>12&&e<18?"Afternoon":e>18||e<5?"Evening":"Day"}())},[]),r.a.createElement("section",{className:Oe.a.MainView},r.a.createElement("h1",{className:Oe.a.mainHeader},"Good ",d," ",t),r.a.createElement("div",{className:Oe.a.weatherContainer},r.a.createElement(q,{lat:n.stop_lat,lon:n.stop_lon,networkError:s})),r.a.createElement("div",{className:Oe.a.trainContainer},r.a.createElement(Ee,{stationObj:n,line:o,reqOn:c,networkError:s})),r.a.createElement("div",{className:Oe.a.settingsLink},r.a.createElement("span",{onClick:l,role:"button",tabIndex:"0"},"Settings")))}je.defaultProps={name:"",stationObj:{},line:"",reqOn:!0,gotoSettings:function(){throw new ReferenceError("gotoSettings not passed to MainView")},networkError:function(){throw new ReferenceError("networkError not passed to MainView")}};var ke=je,Ce=n(10),Ne=n.n(Ce),Se=n(20),ye=n.n(Se),Te=n(21),Be=n.n(Te);function Ie(e){var t=e.initData,n=e.networkError,o=e.saveChanges,c=Object(a.useState)(t.name),l=Object(i.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)(t.stationObj),d=Object(i.a)(m,2),f=d[0],p=d[1],g=Object(a.useState)([]),h=Object(i.a)(g,2),_=h[0],v=h[1],b=Object(a.useState)(t.line),E=Object(i.a)(b,2),O=E[0],k=E[1],C=Object(a.useState)(!1),N=Object(i.a)(C,2),S=N[0],y=N[1],B=Object(a.useState)({name:"",stationObj:"",line:""}),I=Object(i.a)(B,2),x=I[0],M=I[1];return Object(a.useEffect)(function(){if(v(f.stop_id),f.stop_id){var e=f.stop_id.indexOf(O);k(-1!==e?f.stop_id[e]:f.stop_id[0])}},[f]),r.a.createElement("section",{className:Ne.a.SettingsView},r.a.createElement("h1",{className:Ne.a.mainHeader},"Settings"),r.a.createElement("div",{className:Ne.a.inputsContainer},r.a.createElement(j,{error:x.stationObj?x.stationObj:"",getData:function e(t,a,r){y(!0),fetch("".concat("https://choochooserver.herokuapp.com","/search/stops/?query=").concat(t)).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error(e.error);a(e),y(!1),r(!0)}).catch(function(o){"Rate Limit Reached"===o.message?n("Rate Limit Reached",!1):n("/searchStops req failed",!0,e,t,a,r)})},stationObj:f,setStationObj:p,loading:S}),r.a.createElement(w,{onChange:function(e){return u(e.target.value)},initValue:s,maxLength:"16",placeholder:"Name...",alt:"name",label:"First Name (optional)",error:x.name?x.name:"",fluid:1}),r.a.createElement(T,{data:_,lineMap:D,selected:_.indexOf(O),onChange:function(e){return k(_[e.target.value])},error:x.line?x.line:"",label:"Subway Line",alt:"Subway Line"})),r.a.createElement("div",{className:Ne.a.btnContainer},r.a.createElement("a",{href:"mailto:feedback@choochoo.app?subject=Feedback on Choochoo",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(L,{icon:ye.a},"Feedback")),r.a.createElement("a",{href:"https://darksky.net/poweredby/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(L,{icon:Be.a},"Powered by Dark Sky"))),r.a.createElement("div",{className:Ne.a.saveContainer},r.a.createElement(L,{onClick:function(){var e={};Object.keys(f).length||(e.stationObj="Missing station name"),s.length>16&&(e.name="First name too long"),O||(e.line="Missing line"),M(e),Object.keys(e).length||o(s,f,O)}},"Save Changes")))}Ie.defaultProps={initData:{name:"",line:"",stationObj:{}},networkError:function(){throw new ReferenceError("networkError not passed to MainView")},saveChanges:function(){throw new ReferenceError("saveChanges not passed to MainView")}};var xe=Ie;var Le=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),l=Object(i.a)(c,2),u=l[0],d=l[1],f=Object(a.useState)(""),p=Object(i.a)(f,2),h=p[0],_=p[1],v=Object(a.useState)(""),b=Object(i.a)(v,2),E=b[0],w=b[1],O=Object(a.useState)(""),j=Object(i.a)(O,2),k=j[0],C=j[1],N=Object(a.useState)(!0),S=Object(i.a)(N,2),y=S[0],T=S[1],B=Object(a.useRef)(),I=function(e,t,n,a){if(!t||k)C(e);else if(t){for(var r=arguments.length,o=new Array(r>4?r-4:0),c=4;c<r;c++)o[c-4]=arguments[c];(function e(t,n,a){for(var r=arguments.length,o=new Array(r>3?r-3:0),c=3;c<r;c++)o[c-3]=arguments[c];return 0===t?(C("Tries exceeded, try reloading?"),!1):new Promise(function(r){console.log("Retrying network, attempt: ".concat(t)),navigator.onLine?fetch(a).then(function(e){if(!e.ok)throw e;return e.json()}).then(function(e){n&&n.apply(void 0,[e].concat(o)),r(!0),C("")}).catch(function(r){"Server Down"!==k&&C("Server Down"),console.log("Error caught: ",r),setTimeout(function(){return e.apply(void 0,[t-1,n,a].concat(o))},1e4)}):(k||C("Internet down"),setTimeout(function(){return e.apply(void 0,[t-1,n,a].concat(o))},1e4))})}).apply(void 0,[5,n,a].concat(o))}},x=function(e,t,n){if(!t||!n)throw new Error("saveChanges wasn't given proper variables");localStorage.setItem("stationObj",JSON.stringify(t)),localStorage.setItem("name",e),localStorage.setItem("line",n),o(t),d(e),_(n),w("main")},L=function(){if(document.hidden){if(!B.current){var e=window.setTimeout(function(){T(!1),B.current=void 0},6e4);B.current=e}}else B.current?(window.clearTimeout(B.current),B.current=void 0):T(!0)};return Object(a.useEffect)(function(){var e=function(e){return localStorage.getItem(e)||""},t=e("name"),n=e("line"),a=JSON.parse(e("stationObj")||"{}");return d(t),_(n),o(a),w(a&&n?"main":"welcome"),document.addEventListener("visibilitychange",L),function(){return document.removeEventListener("visibilitychange",L)}},[]),r.a.createElement("div",{className:m.a.App},r.a.createElement("header",{className:m.a.imgContainer},r.a.createElement("img",{src:s.a,className:m.a.headerImg,alt:"Sun And Clouds"})),r.a.createElement("div",{className:m.a.content},r.a.createElement(g,{message:k}),"welcome"===E&&r.a.createElement(R,{saveChanges:x,networkError:I}),"main"===E&&r.a.createElement(ke,{name:u,stationObj:n,line:h,reqOn:y,networkError:I,gotoSettings:function(){return w("settings")}}),"settings"===E&&r.a.createElement(xe,{initData:{name:u,stationObj:n,line:h},networkError:I,saveChanges:x})))},De=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Me(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(Le,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");De?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Me(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Me(t,e)})}}()}],[[23,32,31]]]);
//# sourceMappingURL=main.c2d3b5ec.chunk.js.map